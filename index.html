<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>2026 Winter Olympics Bet Tracker</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box}
:root{
--bg:#0a0e17;--card:#111827;--card2:#1a2235;--border:#1e293b;
--gold:#f59e0b;--silver:#94a3b8;--bronze:#d97706;
--win:#10b981;--lose:#ef4444;--pending:#6366f1;--live:#f59e0b;
--text:#f1f5f9;--text2:#94a3b8;--text3:#64748b;
--usa:#1e40af;--ita:#16a34a;--accent:#818cf8;
}
body{background:var(--bg);color:var(--text);font-family:'Source Sans 3',sans-serif;min-height:100vh}
.app{max-width:1100px;margin:0 auto;padding:12px}

/* HEADER */
.header{text-align:center;padding:24px 0 16px;position:relative}
.header h1{font-family:'Oswald',sans-serif;font-size:2.2em;font-weight:700;letter-spacing:2px;
background:linear-gradient(135deg,#60a5fa,#a78bfa,var(--gold));-webkit-background-clip:text;-webkit-text-fill-color:transparent}
.header .sub{color:var(--text2);font-size:.85em;margin-top:4px}
.rings{display:flex;gap:6px;justify-content:center;margin-top:8px}
.rings span{width:18px;height:18px;border-radius:50%;border:2.5px solid}
.rings span:nth-child(1){border-color:#0081C8}
.rings span:nth-child(2){border-color:#FCB131}
.rings span:nth-child(3){border-color:#000;border-color:#555}
.rings span:nth-child(4){border-color:#00A651}
.rings span:nth-child(5){border-color:#EE334E}

/* SUMMARY BAR */
.summary{display:grid;grid-template-columns:repeat(auto-fit,minmax(130px,1fr));gap:8px;margin:16px 0}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:10px;padding:12px;text-align:center}
.stat-card .val{font-family:'Oswald',sans-serif;font-size:1.6em;font-weight:600}
.stat-card .lbl{font-size:.7em;color:var(--text2);text-transform:uppercase;letter-spacing:1px;margin-top:2px}
.val.green{color:var(--win)}.val.red{color:var(--lose)}.val.gold{color:var(--gold)}.val.blue{color:var(--pending)}

/* CONTROLS */
.controls{display:flex;gap:8px;margin:12px 0;flex-wrap:wrap;align-items:center}
.tab-btn{padding:7px 14px;border-radius:8px;border:1px solid var(--border);background:var(--card);color:var(--text2);
cursor:pointer;font-size:.8em;font-family:'Source Sans 3',sans-serif;transition:all .2s}
.tab-btn:hover{border-color:var(--accent);color:var(--text)}
.tab-btn.active{background:var(--accent);color:#fff;border-color:var(--accent)}
.refresh-btn{margin-left:auto;padding:7px 16px;border-radius:8px;border:1px solid var(--gold);
background:transparent;color:var(--gold);cursor:pointer;font-family:'Oswald',sans-serif;font-size:.85em;
letter-spacing:1px;transition:all .2s;display:flex;align-items:center;gap:6px}
.refresh-btn:hover{background:var(--gold);color:var(--bg)}
.refresh-btn.loading{opacity:.6;pointer-events:none}
.spin{display:inline-block;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}

/* BET CARDS */
.bets-grid{display:flex;flex-direction:column;gap:10px;margin-top:12px}
.bet-card{background:var(--card);border:1px solid var(--border);border-radius:12px;overflow:hidden;transition:all .2s}
.bet-card:hover{border-color:#334155}
.bet-card.won{border-left:3px solid var(--win)}
.bet-card.lost{border-left:3px solid var(--lose)}
.bet-card.active{border-left:3px solid var(--pending)}
.bet-card.live{border-left:3px solid var(--live)}

.bet-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;cursor:pointer}
.bet-header:hover{background:var(--card2)}
.bet-left{flex:1;min-width:0}
.bet-title{font-family:'Oswald',sans-serif;font-size:1em;font-weight:500;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.bet-meta{display:flex;gap:10px;margin-top:3px;font-size:.75em;color:var(--text2);flex-wrap:wrap}
.bet-right{text-align:right;flex-shrink:0;margin-left:12px}
.bet-odds{font-family:'Oswald',sans-serif;font-size:1.1em;font-weight:600;color:var(--gold)}
.bet-payout{font-size:.75em;color:var(--text2);margin-top:2px}

.status-badge{display:inline-block;padding:2px 8px;border-radius:4px;font-size:.7em;font-weight:600;letter-spacing:.5px;text-transform:uppercase}
.badge-won{background:#064e3b;color:#6ee7b7}
.badge-lost{background:#450a0a;color:#fca5a5}
.badge-pending{background:#1e1b4b;color:#a5b4fc}
.badge-live{background:#451a03;color:#fcd34d;animation:pulse 2s infinite}
.badge-settled{background:#1c1917;color:#a8a29e}
@keyframes pulse{0%,100%{opacity:1}50%{opacity:.6}}

/* EXPANDABLE DETAIL */
.bet-detail{display:none;padding:0 14px 14px;border-top:1px solid var(--border)}
.bet-card.expanded .bet-detail{display:block}
.legs-table{width:100%;font-size:.8em;margin-top:8px}
.legs-table th{text-align:left;color:var(--text3);font-weight:400;padding:4px 0;border-bottom:1px solid var(--border)}
.legs-table td{padding:5px 0;border-bottom:1px solid #0f172a}
.leg-status{font-weight:600}
.leg-hit{color:var(--win)}.leg-miss{color:var(--lose)}.leg-pending{color:var(--text2)}.leg-live{color:var(--live)}

.bet-id{font-size:.7em;color:var(--text3);margin-top:6px}

/* GAME SCORE WIDGET */
.game-score{background:var(--card2);border-radius:8px;padding:10px;margin-top:8px;display:flex;align-items:center;justify-content:center;gap:16px}
.team-score{text-align:center}
.team-score .name{font-family:'Oswald',sans-serif;font-size:.85em;color:var(--text2)}
.team-score .score{font-family:'Oswald',sans-serif;font-size:1.8em;font-weight:700}
.game-status{font-size:.75em;color:var(--live);font-weight:600}

/* SPORT SECTION HEADERS */
.sport-section{margin-top:20px}
.sport-header{font-family:'Oswald',sans-serif;font-size:1.1em;color:var(--text2);padding:8px 0;
border-bottom:1px solid var(--border);margin-bottom:10px;display:flex;align-items:center;gap:8px}
.sport-icon{font-size:1.2em}

/* LAST UPDATED */
.last-updated{text-align:center;color:var(--text3);font-size:.75em;margin-top:16px;padding-bottom:20px}

/* MOBILE */
@media(max-width:600px){
.app{padding:8px}
.header h1{font-size:1.6em}
.summary{grid-template-columns:repeat(2,1fr)}
.bet-title{font-size:.9em}
.controls{gap:5px}
.tab-btn{padding:5px 10px;font-size:.75em}
}
</style>
</head>
<body>
<div class="app" id="app">
<div class="header">
<h1>MILANO CORTINA 2026</h1>
<div class="sub">Winter Olympics Bet Tracker</div>
<div class="rings"><span></span><span></span><span></span><span></span><span></span></div>
</div>

<div class="summary" id="summary"></div>

<div class="controls">
<button class="tab-btn active" data-filter="all">All</button>
<button class="tab-btn" data-filter="hockey">üèí Hockey</button>
<button class="tab-btn" data-filter="medal">üèÖ Medal Futures</button>
<button class="tab-btn" data-filter="active">‚ö° Active</button>
<button class="tab-btn" data-filter="settled">üìã Settled</button>
<button class="refresh-btn" id="refreshBtn" onclick="refreshData()">
<span id="refreshIcon">‚Üª</span> REFRESH
</button>
</div>

<div class="bets-grid" id="betsGrid"></div>
<div class="last-updated" id="lastUpdated">Last updated: Loading...</div>
</div>

<script>
// ============================================================
// BET DATA - All bets parsed from FanDuel
// ============================================================
const BETS = [
// =================== SETTLED - HOCKEY ===================
// France @ Canada ‚Äî Final: CAN 10, FRA 2
{id:"0002938",type:"hockey",status:"lost",event:"France @ Canada",market:"60 Min Correct Score",pick:"Canada 6-0",odds:"+1200",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 1:35AM",result:"CAN 10‚Äì2 FRA",gameId:"401845675"},
{id:"0002939",type:"hockey",status:"lost",event:"France @ Canada",market:"60 Min Correct Score",pick:"Canada 7-1",odds:"+1700",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 1:35AM",result:"CAN 10‚Äì2 FRA",gameId:"401845675"},
{id:"0002937",type:"hockey",status:"lost",event:"France @ Canada",market:"60 Min Correct Score",pick:"France 4-2",odds:"+40000",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 1:35AM",result:"CAN 10‚Äì2 FRA",gameId:"401845675"},
{id:"0002961",type:"hockey",status:"lost",event:"France @ Canada",market:"SGP",pick:"OT Yes + France ML",odds:"+8323",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 9:50PM",result:"CAN 10‚Äì2 FRA",legs:["Yes OT","France ML"],gameId:"401845675"},
{id:"0002932",type:"hockey",status:"lost",event:"France @ Canada",market:"SGP",pick:"OT Yes + France ML + Under 6.5",odds:"+7970",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 9:54PM",result:"CAN 10‚Äì2 FRA",legs:["Yes OT","France ML","Under 6.5 Goals"],gameId:"401845675"},

// Denmark @ USA ‚Äî Final: USA 6, DEN 3
{id:"0002936",type:"hockey",status:"lost",event:"Denmark @ USA",market:"Correct Score (incl. OT/SO)",pick:"USA 5-0",odds:"+1600",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 12:46AM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002935",type:"hockey",status:"lost",event:"Denmark @ USA",market:"Correct Score (incl. OT/SO)",pick:"USA 6-0",odds:"+1800",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 12:46AM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002934",type:"hockey",status:"lost",event:"Denmark @ USA",market:"Correct Score (incl. OT/SO)",pick:"USA 7-0",odds:"+2500",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 12:46AM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002930",type:"hockey",status:"lost",event:"Denmark @ USA",market:"60 Min Correct Score",pick:"Tie 5-5",odds:"+17500",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:23PM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002926",type:"hockey",status:"lost",event:"Denmark @ USA",market:"60 Min Correct Score",pick:"USA 5-4",odds:"+12500",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:23PM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002928",type:"hockey",status:"lost",event:"Denmark @ USA",market:"60 Min Correct Score",pick:"Denmark 6-3",odds:"+40000",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:23PM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002927",type:"hockey",status:"lost",event:"Denmark @ USA",market:"60 Min Correct Score",pick:"USA 7-5",odds:"+30000",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:23PM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002929",type:"hockey",status:"lost",event:"Denmark @ USA",market:"60 Min Correct Score",pick:"USA 6-4",odds:"+10000",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:23PM",result:"USA 6‚Äì3 DEN",gameId:"401845676"},
{id:"0002925",type:"hockey",status:"lost",event:"Denmark @ USA",market:"SGP",pick:"OT Yes + Denmark ML",odds:"+2345",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:07PM",result:"USA 6‚Äì3 DEN",legs:["Yes OT","Denmark ML"],gameId:"401845676"},

// Other settled hockey
{id:"0002924",type:"hockey",status:"lost",event:"Italy @ Finland",market:"SGP",pick:"OT Yes + Italy ML",odds:"+3253",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 8:06PM",result:"Settled",legs:["Yes OT","Italy ML"]},
{id:"0002933",type:"hockey",status:"lost",event:"Germany (W) @ Canada (W)",market:"SGP",pick:"OT + Germany W ML + Poulin Goal",odds:"+15385",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 9:58PM",result:"Settled",legs:["Yes OT","Germany (W) ML","Poulin ATGS"]},
{id:"0002931",type:"hockey",status:"lost",event:"Italy @ Finland",market:"SGP",pick:"OT + Italy ML + No 1st 10min Goal",odds:"+6079",wager:"$0.10",payout:"$0.00",placed:"2/13/2026 9:52PM",result:"Settled",legs:["Yes OT","Italy ML","No 1P Goal 1st 10min"]},

// =================== SETTLED - MEDAL FUTURES ===================
{id:"0002944",type:"medal",status:"lost",event:"Multi-Sport Parlay",market:"3 Leg Parlay",pick:"Silvestro + Baumgartner + Jackson",odds:"+23462200",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 2:01AM",result:"Jackson DNM; Kok won 500m",legs:["Silvestro (ITA) Monobob Gold","Baumgartner (ITA) 2-Man Bob Gold","Erin Jackson (USA) 500m Gold"]},
{id:"0002943",type:"medal",status:"lost",event:"Women's Giant Slalom",market:"To Win A Medal",pick:"Sofia Goggia (ITA)",odds:"+2500",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 1:55AM",result:"Brignone won; Goggia DNM"},
{id:"0002941",type:"medal",status:"lost",event:"Women's Giant Slalom",market:"Gold Medal Winner",pick:"Lara Della Mea (ITA)",odds:"+8000",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 1:55AM",result:"Brignone (ITA) won gold"},
{id:"0002949",type:"medal",status:"lost",event:"Men's 12.5km Pursuit",market:"Gold Medal Winner",pick:"Lukas Hofer (ITA)",odds:"+10000",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 8:26PM",result:"Settled"},
{id:"0002948",type:"medal",status:"lost",event:"Men's 12.5km Pursuit",market:"Gold Medal Winner",pick:"Campbell Wright (USA)",odds:"+10000",wager:"$0.10",payout:"$0.00",placed:"2/14/2026 8:26PM",result:"Settled"},

// =========== SETTLED - Latvia @ Denmark (Final: DEN 4, LAT 2) ===========
{id:"0003000",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"60 Min Correct Score",pick:"Latvia 4-3",odds:"+2200",wager:"$0.22",payout:"$0.00",placed:"2/15/2026 3:03PM",result:"DEN 4‚Äì2 LAT",gameId:"401845678"},
{id:"0002999",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"60 Min Correct Score",pick:"Denmark 4-3",odds:"+1200",wager:"$0.20",payout:"$0.00",placed:"2/15/2026 3:02PM",result:"DEN 4‚Äì2 LAT",gameId:"401845678"},
{id:"0002998",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Olesen 2+ Goals + Vilmanis ATGS",odds:"+12341",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 3:01PM",result:"DEN 4‚Äì2 LAT",legs:["Nick Olesen 2+ Goals","Sandis Vilmanis ATGS"],gameId:"401845678"},
{id:"0002997",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Molgaard + Eller + Vilmanis ATGS",odds:"+41738",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 2:59PM",result:"DEN 4‚Äì2 LAT",legs:["Molgaard ATGS","Lars Eller ATGS","Vilmanis ATGS"],gameId:"401845678"},
{id:"0002996",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Tralmaks 2+ Goals + Eller ATGS",odds:"+8084",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 2:58PM",result:"DEN 4‚Äì2 LAT",legs:["Tralmaks 2+ Goals","Lars Eller ATGS"],gameId:"401845678"},
{id:"0002993",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Tralmaks + Eller + Ehlers 2+ + Girgensons",odds:"+34108",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 1:51PM",result:"DEN 4‚Äì2 LAT",legs:["Tralmaks ATGS","Eller ATGS","Ehlers 2+ Goals","Girgensons ATGS"],gameId:"401845678"},
{id:"0002992",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Aagaard 2+ + Tralmaks + Olesen 2+",odds:"+27427",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 1:50PM",result:"DEN 4‚Äì2 LAT",legs:["Aagaard 2+ Goals","Tralmaks ATGS","Olesen 2+ Goals"],gameId:"401845678"},
{id:"0002991",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"SGP",pick:"Latvia ML + Tie 3-Way + Over 9.5",odds:"+4252",wager:"$0.10",payout:"$0.00",placed:"2/15/2026 1:47PM",result:"DEN 4‚Äì2 LAT",legs:["Latvia ML","Tie 60min 3-Way","Over 9.5 Alt Goals"],gameId:"401845678"},
{id:"0002990",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"Correct Score (incl. OT/SO)",pick:"Denmark 7-3",odds:"+3500",wager:"$0.15",payout:"$0.00",placed:"2/15/2026 1:46PM",result:"DEN 4‚Äì2 LAT",gameId:"401845678"},
{id:"0002989",type:"hockey",status:"lost",event:"Latvia @ Denmark",market:"60 Min Correct Score",pick:"Any Other Score",odds:"+2500",wager:"$0.50",payout:"$0.00",placed:"2/15/2026 1:46PM",result:"DEN 4‚Äì2 LAT",gameId:"401845678"},

// =================== ACTIVE - GERMANY @ USA (Game ID: 401845680) ===================
{id:"0002994",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"None 1st Goal + Germany ML",odds:"+26146",wager:"$0.10",payout:"$26.25",placed:"2/15/2026 2:49PM",gameId:"401845680",legs:["None 60min 1st Goal","Germany ML"]},
{id:"0003001",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"Matthews 2P 2+ SOG + Matthews ATGS + Tiffels 2P Goal",odds:"+7735",wager:"$0.10",payout:"$7.84",placed:"2/15/2026 3:11PM",gameId:"401845680",legs:["Matthews 2P 2+ SOG","Matthews ATGS","Tiffels 2P Goal"]},
{id:"0002981",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP (8 legs)",pick:"B.Tkachuk 3+ Pts + M.Tkachuk 2+ Pts + more",odds:"+27423",wager:"$0.10",payout:"$27.52",placed:"2/15/2026 12:23PM",gameId:"401845680",
legs:["B.Tkachuk 3+ Points","M.Tkachuk 2+ Points","M.Tkachuk 1st Goal","Peterka 2+ SOG","Hughes 2+ SOG","Eichel 4+ SOG","Matthews 3+ SOG","B.Tkachuk 3+ SOG"]},
{id:"0002980",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"B.Tkachuk 3+ Goals + M.Tkachuk 3+ Pts",odds:"+11822",wager:"$0.10",payout:"$11.92",placed:"2/15/2026 12:21PM",gameId:"401845680",legs:["B.Tkachuk 3+ Goals","M.Tkachuk 3+ Points"]},
{id:"0002979",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"M.Tkachuk 1st Goal + B.Tkachuk ATGS",odds:"+2184",wager:"$0.10",payout:"$2.28",placed:"2/15/2026 12:16PM",gameId:"401845680",legs:["M.Tkachuk 1st Goal","B.Tkachuk ATGS"]},
{id:"0002978",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"B.Tkachuk 1st Goal + M.Tkachuk 2+ Goals",odds:"+10697",wager:"$0.10",payout:"$10.80",placed:"2/15/2026 12:16PM",gameId:"401845680",legs:["B.Tkachuk 1st Goal","M.Tkachuk 2+ Goals"]},
{id:"0002977",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP (15 legs)",pick:"Points & SOG Props Mega Parlay",odds:"+13526",wager:"$0.10",payout:"$13.63",placed:"2/15/2026 12:15PM",gameId:"401845680",
legs:["B.Tkachuk 1+ Pts","Boldy 1P 1+ SOG","Boldy 3P 1+ SOG","M.Tkachuk 2P 1+ SOG","Werenski 2P 1+ SOG","Eichel 2P 2+ SOG","Eichel 2+ Pts","Matthews 1+ Pts","Draisaitl 1+ Pts","Guentzel 3P 1+ SOG","Boldy 2P 1+ SOG","M.Tkachuk 3P 1+ SOG","B.Tkachuk 3P 1+ SOG","M.Tkachuk 1P 1+ SOG","M.Tkachuk 2+ Pts"]},
{id:"0002976",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP (10 legs)",pick:"Matthews + SOG + Eichel + Guentzel",odds:"+24973",wager:"$0.10",payout:"$25.07",placed:"2/15/2026 12:13PM",gameId:"401845680",
legs:["Matthews 1P 2+ SOG","M.Tkachuk 2P 1+ SOG","Peterka 2P 1+ SOG","Peterka 3P 1+ SOG","Draisaitl 3P 1+ SOG","Werenski 2P 2+ SOG","B.Tkachuk 2P 1+ SOG","Eichel ATGS","Draisaitl 1+ Pts","Guentzel 2+ Pts"]},
{id:"0002975",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 7-1",odds:"+3000",wager:"$0.10",payout:"$3.10",placed:"2/15/2026 12:10PM",gameId:"401845680"},
{id:"0002974",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 6-2",odds:"+1700",wager:"$0.10",payout:"$1.80",placed:"2/15/2026 12:10PM",gameId:"401845680"},
{id:"0002973",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 6-0",odds:"+3500",wager:"$0.10",payout:"$3.60",placed:"2/15/2026 12:10PM",gameId:"401845680"},
{id:"0002972",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 6-5",odds:"+40000",wager:"$0.10",payout:"$40.10",placed:"2/15/2026 12:10PM",gameId:"401845680"},
{id:"0002971",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 7-0",odds:"+4000",wager:"$0.10",payout:"$4.10",placed:"2/15/2026 12:10PM",gameId:"401845680"},
// New 4pm bets
{id:"0003008",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"Reichel ATGS + Reichel/Peterka/Seider 3P SOG",odds:"+13168",wager:"$0.10",payout:"$13.27",placed:"2/15/2026 4:17PM",gameId:"401845680",legs:["Reichel ATGS","Reichel 3P 2+ SOG","Peterka 3P 2+ SOG","Seider 3P 3+ SOG"]},
{id:"0003007",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP (6 legs)",pick:"Seider + Boldy + M.Tkachuk + more 3P SOG",odds:"+8456",wager:"$0.10",payout:"$8.56",placed:"2/15/2026 4:15PM",gameId:"401845680",legs:["Seider 3P 2+ SOG","Boldy 3P 2+ SOG","M.Tkachuk ATGS","B.Tkachuk 3P 2+ SOG","Eichel 3P 1+ SOG","Draisaitl 3P 1+ SOG"]},
{id:"0003006",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"Seider ATGS + Draisaitl/Seider/Boldy 3P SOG",odds:"+12559",wager:"$0.10",payout:"$12.66",placed:"2/15/2026 4:11PM",gameId:"401845680",legs:["Seider ATGS","Draisaitl 3P 2+ SOG","Seider 3P 3+ SOG","Boldy 3P 2+ SOG"]},
{id:"0003005",type:"hockey",status:"active",event:"Germany @ USA",market:"SGP",pick:"Seider 2P Goal + Seider 3P 3+ SOG",odds:"+8457",wager:"$0.10",payout:"$8.56",placed:"2/15/2026 4:06PM",gameId:"401845680",legs:["Seider 2P Goal","Seider 3P 3+ SOG"]},
{id:"0003004",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 4-0",odds:"+1000",wager:"$0.10",payout:"$1.10",placed:"2/15/2026 4:02PM",gameId:"401845680"},
{id:"0003003",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 3-1",odds:"+1900",wager:"$0.10",payout:"$2.00",placed:"2/15/2026 4:02PM",gameId:"401845680"},
{id:"0003002",type:"hockey",status:"active",event:"Germany @ USA",market:"60 Min Correct Score",pick:"USA 5-1",odds:"+1000",wager:"$0.10",payout:"$1.10",placed:"2/15/2026 4:02PM",gameId:"401845680"},

// 4-leg cross-game SGP+
{id:"0002995",type:"hockey",status:"active",event:"GER@USA + LAT@DEN",market:"4-Leg SGP+",pick:"Draisaitl SOG Props + 3P Goal + Tralmaks 2+",odds:"+44350",wager:"$0.10",payout:"$44.45",placed:"2/15/2026 2:58PM",
legs:["Draisaitl 1P 2+ SOG","Draisaitl 2P 2+ SOG","Draisaitl 3P Goal","Tralmaks 2+ Goals (LAT@DEN)"]},

// =================== ACTIVE - MEDAL FUTURES ===================
{id:"0002988",type:"medal",status:"pending",event:"Women's Slalom",market:"To Win A Medal",pick:"Martina Peterlini (ITA)",odds:"+6500",wager:"$0.10",payout:"$6.60",placed:"2/15/2026 1:21PM",eventDate:"Tue 11:00am ET"},
{id:"0002987",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Eliane Christen (SUI)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 1:18PM",eventDate:"Tue 11:00am ET"},
{id:"0002986",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Lara Della Mea (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 1:18PM",eventDate:"Tue 11:00am ET"},
{id:"0002985",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Caitlin McFarlane (FRA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 1:18PM",eventDate:"Tue 11:00am ET"},
{id:"0002984",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Paula Moltzan (USA)",odds:"+1800",wager:"$0.10",payout:"$1.90",placed:"2/15/2026 1:18PM",eventDate:"Tue 11:00am ET"},
{id:"0002983",type:"medal",status:"pending",event:"Women's Slopestyle",market:"Gold Medal Winner",pick:"Lily Dhawornvej (USA)",odds:"+6500",wager:"$0.16",payout:"$10.56",placed:"2/15/2026 1:17PM",eventDate:"Tue 7:00am ET"},
{id:"0002982",type:"medal",status:"pending",event:"Women's Slopestyle",market:"Gold Medal Winner",pick:"Jessica Perlmutter (USA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 1:17PM",eventDate:"Tue 7:00am ET"},
{id:"0002970",type:"medal",status:"pending",event:"2 Man Bobsleigh",market:"Gold Medal Winner",pick:"Cedric Follador (SUI)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:05AM",eventDate:"Mon 4:00am ET"},
{id:"0002969",type:"medal",status:"pending",event:"2 Man Bobsleigh",market:"Gold Medal Winner",pick:"Patrick Baumgartner (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:05AM",eventDate:"Mon 4:00am ET"},
{id:"0002968",type:"medal",status:"pending",event:"Women's Monobob",market:"Gold Medal Winner",pick:"Simone De Silvestro (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:05AM",eventDate:"Mon 4:00am ET"},
{id:"0002967",type:"medal",status:"pending",event:"Women's Monobob",market:"Gold Medal Winner",pick:"Giada Andreutti (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:05AM",eventDate:"Mon 4:00am ET"},
{id:"0002966",type:"medal",status:"pending",event:"Women's Figure Skating",market:"Gold Medal Winner",pick:"Isabeau Levito (USA)",odds:"+3300",wager:"$0.10",payout:"$3.40",placed:"2/15/2026 2:03AM",eventDate:"Tue 12:45pm ET"},
{id:"0002965",type:"medal",status:"pending",event:"Women's Figure Skating",market:"Gold Medal Winner",pick:"Anna Pezzetta (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:03AM",eventDate:"Tue 12:45pm ET"},
{id:"0002964",type:"medal",status:"pending",event:"Women's Figure Skating",market:"Gold Medal Winner",pick:"Lara Naki Gutmann (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:03AM",eventDate:"Tue 12:45pm ET"},
{id:"0002963",type:"medal",status:"pending",event:"Men's 1500m Speed Skating",market:"Gold Medal Winner",pick:"Daniele Di Stefano (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:02AM",eventDate:"Thu 10:30am ET"},
{id:"0002962",type:"medal",status:"pending",event:"Men's Nordic Combined",market:"Gold Medal Winner",pick:"Samuel Costa (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/15/2026 2:02AM",eventDate:"Mon 3:00am ET"},
{id:"0002960",type:"medal",status:"pending",event:"Men's Slalom",market:"Gold Medal Winner",pick:"Tobias Kastlunger (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:37PM",eventDate:"Mon 11:00am ET"},
{id:"0002959",type:"medal",status:"pending",event:"Men's Slalom",market:"Gold Medal Winner",pick:"Benjamin Ritchie (USA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:37PM",eventDate:"Mon 11:00am ET"},
{id:"0002958",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Martina Peterlini (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:37PM",eventDate:"Tue 4:00am ET"},
{id:"0002957",type:"medal",status:"pending",event:"Women's Slopestyle",market:"Gold Medal Winner",pick:"Hahna Norman (USA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:32PM",eventDate:"Tue 8:15am ET"},
{id:"0002956",type:"medal",status:"pending",event:"Women's Aerials",market:"Gold Medal Winner",pick:"Tasia Tanner (USA)",odds:"+6500",wager:"$0.10",payout:"$6.60",placed:"2/14/2026 8:30PM",eventDate:"Tue 4:45am ET"},
{id:"0002955",type:"medal",status:"pending",event:"Women's Ski Cross",market:"Gold Medal Winner",pick:"Morgan Shute (USA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:30PM",eventDate:"Fri 6:00am ET"},
{id:"0002954",type:"medal",status:"pending",event:"Men's Ski Cross",market:"Gold Medal Winner",pick:"Tyler Wallasch (USA)",odds:"+8000",wager:"$0.10",payout:"$8.10",placed:"2/14/2026 8:30PM",eventDate:"Sat 4:00am ET"},
{id:"0002953",type:"medal",status:"pending",event:"Men's Aerials",market:"Gold Medal Winner",pick:"Derek Krueger (USA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:30PM",eventDate:"Tue 7:30am ET"},
{id:"0002952",type:"medal",status:"pending",event:"Men's Big Air",market:"Gold Medal Winner",pick:"Miro Tabanelli (ITA)",odds:"+5000",wager:"$0.10",payout:"$5.10",placed:"2/14/2026 8:30PM",eventDate:"Sat 1:30pm ET"},
{id:"0002951",type:"medal",status:"pending",event:"Men's Big Air",market:"Gold Medal Winner",pick:"Konnor Ralph (USA)",odds:"+5000",wager:"$0.10",payout:"$5.10",placed:"2/14/2026 8:30PM",eventDate:"Sat 1:30pm ET"},
{id:"0002950",type:"medal",status:"pending",event:"Women's Biathlon Mass Start",market:"Gold Medal Winner",pick:"Lisa Theresa Hauser (AUT)",odds:"+6500",wager:"$0.10",payout:"$6.60",placed:"2/14/2026 8:26PM",eventDate:"Sat 8:45am ET"},
{id:"0002947",type:"medal",status:"pending",event:"Women's Biathlon 4x6km Relay",market:"Gold Medal Winner",pick:"Slovakia",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:23PM",eventDate:"Wed 8:45am ET"},
{id:"0002946",type:"medal",status:"pending",event:"Women's Biathlon 4x6km Relay",market:"Gold Medal Winner",pick:"Austria",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:23PM",eventDate:"Wed 8:45am ET"},
{id:"0002945",type:"medal",status:"pending",event:"Women's Biathlon 4x6km Relay",market:"Gold Medal Winner",pick:"United States",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 8:23PM",eventDate:"Wed 8:45am ET"},
{id:"0002942",type:"medal",status:"pending",event:"Women's Slalom",market:"To Win A Medal",pick:"Martina Peterlini (ITA)",odds:"+6500",wager:"$0.10",payout:"$6.60",placed:"2/14/2026 1:55AM",eventDate:"Tue 4:00am ET"},
{id:"0002940",type:"medal",status:"pending",event:"Women's Slalom",market:"Gold Medal Winner",pick:"Martina Peterlini (ITA)",odds:"+10000",wager:"$0.10",payout:"$10.10",placed:"2/14/2026 1:55AM",eventDate:"Tue 4:00am ET"},
];

// ============================================================
// ESPN API INTEGRATION
// ============================================================
const ESPN_HOCKEY_M = "https://site.api.espn.com/apis/site/v2/sports/hockey/olympics-mens-ice-hockey";
const ESPN_HOCKEY_W = "https://site.api.espn.com/apis/site/v2/sports/hockey/olympics-womens-ice-hockey";

let liveGames = {};
let lastRefresh = new Date();

async function fetchHockeyScores() {
  try {
    const [mRes, wRes] = await Promise.all([
      fetch(ESPN_HOCKEY_M + "/scoreboard").then(r => r.json()),
      fetch(ESPN_HOCKEY_W + "/scoreboard").then(r => r.json())
    ]);
    const allEvents = [...(mRes.events || []), ...(wRes.events || [])];
    allEvents.forEach(ev => {
      const comp = ev.competitions?.[0];
      if (!comp) return;
      const teams = comp.competitors || [];
      const status = comp.status?.type?.description || "Scheduled";
      const clock = comp.status?.displayClock || "";
      const period = comp.status?.period || 0;
      const game = { id: ev.id, name: ev.shortName, status, clock, period, teams: {} };
      teams.forEach(t => {
        const abbr = t.team?.abbreviation || "?";
        game.teams[abbr] = { score: parseInt(t.score || 0), abbr, name: t.team?.displayName || abbr };
      });
      liveGames[ev.id] = game;
    });
  } catch (e) { console.error("ESPN fetch error:", e); }
}

async function fetchBoxScore(gameId) {
  try {
    const res = await fetch(ESPN_HOCKEY_M + "/summary?event=" + gameId).then(r => r.json());
    const players = {};
    (res.boxscore?.players || []).forEach(teamData => {
      (teamData.statistics || []).forEach(cat => {
        const labels = cat.labels || [];
        const gIdx = labels.indexOf("G"), aIdx = labels.indexOf("A"), sIdx = labels.indexOf("S");
        (cat.athletes || []).forEach(ath => {
          const name = ath.athlete?.displayName;
          const stats = ath.stats || [];
          if (name) {
            players[name] = {
              goals: parseInt(stats[gIdx] || 0),
              assists: parseInt(stats[aIdx] || 0),
              shots: parseInt(stats[sIdx] || 0),
              points: parseInt(stats[gIdx] || 0) + parseInt(stats[aIdx] || 0)
            };
          }
        });
      });
    });
    // Get scoring plays for first goal scorer
    const plays = (res.plays || []).filter(p => p.text?.includes("Goal"));
    return { players, scoringPlays: plays };
  } catch (e) { console.error("Box score error:", e); return { players: {}, scoringPlays: [] }; }
}

// ============================================================
// RENDERING
// ============================================================
let activeFilter = "all";
let expandedBets = new Set();

function getStatusClass(bet) {
  if (bet.status === "lost") return "lost";
  if (bet.status === "won") return "won";
  if (bet.status === "active" || bet.status === "live") return "live";
  return "active";
}

function getBadge(bet) {
  if (bet.status === "lost") return '<span class="status-badge badge-lost">LOST</span>';
  if (bet.status === "won") return '<span class="status-badge badge-won">WON</span>';
  if (bet.status === "active") return '<span class="status-badge badge-live">LIVE</span>';
  if (bet.status === "pending") return '<span class="status-badge badge-pending">PENDING</span>';
  return '<span class="status-badge badge-settled">SETTLED</span>';
}

function getGameWidget(bet) {
  if (!bet.gameId || !liveGames[bet.gameId]) return "";
  const g = liveGames[bet.gameId];
  const teamAbbrs = Object.keys(g.teams);
  if (teamAbbrs.length < 2) return "";
  const t1 = g.teams[teamAbbrs[0]], t2 = g.teams[teamAbbrs[1]];
  return `<div class="game-score">
    <div class="team-score"><div class="name">${t1.abbr}</div><div class="score">${t1.score}</div></div>
    <div><div class="game-status">${g.status === "In Progress" ? "LIVE" : g.status}</div>
    ${g.clock ? `<div style="font-size:.7em;color:var(--text3)">${g.clock} P${g.period}</div>` : ""}</div>
    <div class="team-score"><div class="name">${t2.abbr}</div><div class="score">${t2.score}</div></div>
  </div>`;
}

function renderLegs(bet) {
  if (!bet.legs || !bet.legs.length) return "";
  let html = '<table class="legs-table"><tr><th>Leg</th><th>Status</th></tr>';
  bet.legs.forEach(leg => {
    const cls = bet.status === "lost" ? "leg-miss" : "leg-pending";
    const icon = bet.status === "lost" ? "‚úó" : "‚è≥";
    html += `<tr><td>${leg}</td><td class="leg-status ${cls}">${icon}</td></tr>`;
  });
  html += "</table>";
  return html;
}

function filterBets(bets) {
  return bets.filter(b => {
    if (activeFilter === "all") return true;
    if (activeFilter === "hockey") return b.type === "hockey";
    if (activeFilter === "medal") return b.type === "medal";
    if (activeFilter === "active") return b.status === "active" || b.status === "pending" || b.status === "live";
    if (activeFilter === "settled") return b.status === "lost" || b.status === "won";
    return true;
  });
}

function renderSummary() {
  const total = BETS.length;
  const won = BETS.filter(b => b.status === "won").length;
  const lost = BETS.filter(b => b.status === "lost").length;
  const active = BETS.filter(b => b.status === "active" || b.status === "live").length;
  const pending = BETS.filter(b => b.status === "pending").length;
  const totalWagered = BETS.reduce((s, b) => s + parseFloat(b.wager.replace("$", "")), 0);
  const totalReturned = BETS.filter(b => b.status === "won").reduce((s, b) => s + parseFloat(b.payout.replace("$", "")), 0);
  const potentialPayout = BETS.filter(b => b.status === "active" || b.status === "pending" || b.status === "live")
    .reduce((s, b) => s + parseFloat(b.payout.replace("$", "")), 0);

  document.getElementById("summary").innerHTML = `
    <div class="stat-card"><div class="val">${total}</div><div class="lbl">Total Bets</div></div>
    <div class="stat-card"><div class="val blue">${active}</div><div class="lbl">Live</div></div>
    <div class="stat-card"><div class="val gold">${pending}</div><div class="lbl">Pending</div></div>
    <div class="stat-card"><div class="val red">${lost}</div><div class="lbl">Lost</div></div>
    <div class="stat-card"><div class="val green">${won}</div><div class="lbl">Won</div></div>
    <div class="stat-card"><div class="val">$${totalWagered.toFixed(2)}</div><div class="lbl">Wagered</div></div>
    <div class="stat-card"><div class="val gold">$${potentialPayout.toFixed(2)}</div><div class="lbl">Potential</div></div>
    <div class="stat-card"><div class="val green">$${totalReturned.toFixed(2)}</div><div class="lbl">Returned</div></div>
  `;
}

function renderBets() {
  const filtered = filterBets(BETS);
  // Sort: active/live first, then pending, then settled
  const order = { active: 0, live: 0, pending: 1, won: 2, lost: 3 };
  filtered.sort((a, b) => (order[a.status] ?? 2) - (order[b.status] ?? 2));

  let html = "";
  let currentSection = "";

  filtered.forEach(bet => {
    const section = bet.status === "lost" || bet.status === "won" ? "settled" : bet.type === "hockey" ? "hockey" : "futures";
    if (section !== currentSection && activeFilter === "all") {
      currentSection = section;
      const icons = { hockey: "üèí", futures: "üèÖ", settled: "üìã" };
      const labels = { hockey: "Live Hockey", futures: "Medal Futures", settled: "Settled" };
      html += `<div class="sport-section"><div class="sport-header"><span class="sport-icon">${icons[section]}</span>${labels[section]}</div></div>`;
    }

    const expanded = expandedBets.has(bet.id);
    html += `
    <div class="bet-card ${getStatusClass(bet)} ${expanded ? "expanded" : ""}" data-id="${bet.id}">
      <div class="bet-header" onclick="toggleBet('${bet.id}')">
        <div class="bet-left">
          <div class="bet-title">${bet.pick}</div>
          <div class="bet-meta">
            <span>${bet.event}</span>
            <span>${bet.market}</span>
            ${bet.eventDate ? `<span>üìÖ ${bet.eventDate}</span>` : ""}
            ${getBadge(bet)}
          </div>
        </div>
        <div class="bet-right">
          <div class="bet-odds">${bet.odds}</div>
          <div class="bet-payout">${bet.wager} ‚Üí ${bet.payout}</div>
        </div>
      </div>
      <div class="bet-detail">
        ${getGameWidget(bet)}
        ${renderLegs(bet)}
        ${bet.result ? `<div style="margin-top:8px;font-size:.8em;color:var(--text2)">Result: ${bet.result}</div>` : ""}
        <div class="bet-id">BET ID: O/1924696/${bet.id} | Placed: ${bet.placed}</div>
      </div>
    </div>`;
  });

  document.getElementById("betsGrid").innerHTML = html || '<div style="text-align:center;color:var(--text3);padding:40px">No bets match this filter</div>';
}

function toggleBet(id) {
  if (expandedBets.has(id)) expandedBets.delete(id);
  else expandedBets.add(id);
  renderBets();
}

async function refreshData() {
  const btn = document.getElementById("refreshBtn");
  const icon = document.getElementById("refreshIcon");
  btn.classList.add("loading");
  icon.classList.add("spin");
  btn.innerHTML = '<span id="refreshIcon" class="spin">‚Üª</span> REFRESHING...';

  await fetchHockeyScores();

  // Update active hockey bets with live game data
  BETS.forEach(bet => {
    if (bet.gameId && liveGames[bet.gameId]) {
      const g = liveGames[bet.gameId];
      if (g.status === "Final") {
        if (bet.status === "active" || bet.status === "live") {
          bet.status = "lost"; // Default to lost; manual override for wins
          const teams = Object.values(g.teams);
          bet.result = `${teams[0]?.abbr} ${teams[0]?.score}‚Äì${teams[1]?.score} ${teams[1]?.abbr}`;
        }
      } else if (g.status === "In Progress") {
        if (bet.status === "active") bet.status = "active";
      }
    }
  });

  lastRefresh = new Date();
  renderSummary();
  renderBets();
  document.getElementById("lastUpdated").textContent = `Last updated: ${lastRefresh.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", timeZone: "America/New_York" })} ET`;

  btn.classList.remove("loading");
  btn.innerHTML = '<span id="refreshIcon">‚Üª</span> REFRESH';
}

// TAB HANDLERS
document.querySelectorAll(".tab-btn").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll(".tab-btn").forEach(b => b.classList.remove("active"));
    btn.classList.add("active");
    activeFilter = btn.dataset.filter;
    renderBets();
  });
});

// INIT
(async function init() {
  await fetchHockeyScores();
  renderSummary();
  renderBets();
  lastRefresh = new Date();
  document.getElementById("lastUpdated").textContent = `Last updated: ${lastRefresh.toLocaleTimeString("en-US", { hour: "numeric", minute: "2-digit", timeZone: "America/New_York" })} ET`;
})();
</script>
</body>
</html>
